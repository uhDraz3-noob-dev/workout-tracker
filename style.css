/* ------ Day detail modal ------ */
.modalOverlay{
  position:fixed; inset:0; background:#0009; display:none; align-items:center; justify-content:center; z-index:999;
}
.modal{
  width:min(760px, 92vw); max-height:80vh; overflow:auto;
  background:var(--panel); border:1px solid #1f2937; border-radius:14px; padding:16px;
  box-shadow:0 10px 30px #0008;
}
.modal .row{align-items:center; justify-content:space-between}
.modal h3{margin:0 0 6px}
.modal .closeBtn{appearance:none;border:1px solid #1e293b;border-radius:10px;padding:6px 10px;background:#0b1220;color:var(--text);cursor:pointer}
.modal .closeBtn:hover{background:#0f1b33}
.modal .item{display:flex;justify-content:space-between;gap:8px;border-bottom:1px dashed #263245;padding:6px 0}
.modal .mut{color:var(--mut);font-size:12px}

/* Grey-out completed cards in Program */
.done{opacity:.5; filter:grayscale(.9); position:relative}
.done::after{
  content:"DONE"; position:absolute; top:8px; right:8px; font-size:11px; color:#10b981;
  border:1px solid #1e293b; background:#0b1220; padding:2px 6px; border-radius:999px;
}

/* Optional: minty highlight under Completed title */
.card h2 + .smallmut { color:#a7f3d0; }

/* Keep dropdowns styled like your inputs */
select.input{
  background:#0b1220;
  border:1px solid #1e293b;
  color:var(--text);
  padding:10px;
  border-radius:10px;
  min-width:120px;
}

/* (Optional) Ensure the modal is always above everything */
.modalOverlay{ z-index:1200; }

/* (Optional) Subtle hover even on done cards so they still feel clickable */
.card.done{ cursor:pointer; }
.card.done:hover{ opacity:.6; }

/* (Optional) Fallback chip style in case your base CSS doesn't have it */
.chips{ display:flex; flex-wrap:wrap; gap:6px; margin-top:8px; }
.chip{
  background:#1f2937;
  border:1px solid #263245;
  border-radius:10px;
  padding:6px 8px;
  font-size:12px;
}

/* ----- Motion defaults (respect reduced motion) ----- */
:root { --ease: cubic-bezier(.22,.61,.36,1); --dur: .28s; }
@media (prefers-reduced-motion: reduce) {
  * { animation-duration: .001ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
}

/* Buttons + tabs */
.btn { transition: transform var(--dur) var(--ease), box-shadow var(--dur) var(--ease); }
.btn:hover { transform: translateY(-1px); box-shadow: 0 6px 16px #0004; }
.btn:active { transform: translateY(0); box-shadow: none; }

/* Cards & grid items */
.card { transition: border-color var(--dur) var(--ease), background-color var(--dur) var(--ease), transform var(--dur) var(--ease); }
.grid .card { cursor: pointer; }
.grid .card:hover { transform: translateY(-2px); }

/* Modal fade/scale */
.modalOverlay { opacity: 0; transition: opacity .22s var(--ease); }
.modalOverlay.open { opacity: 1; }
.modal { transform: translateY(10px) scale(.98); transition: transform .24s var(--ease), opacity .24s var(--ease); opacity: 0; }
.modalOverlay.open .modal { transform: translateY(0) scale(1); opacity: 1; }

/* Tooltip for charts (we create the div in JS) */
#chartTip { backdrop-filter: blur(4px); animation: tipfade .12s var(--ease); }
@keyframes tipfade { from {opacity:0; transform: translateY(2px)} to {opacity:1; transform:none} }

/* “Done” state pulse */
.done::after { animation: donepulse 1.2s var(--ease) 1; }
@keyframes donepulse {
  0% { transform: scale(.9); opacity:.6 }
  100% { transform: scale(1); opacity:1 }
}

/* Ripple effect (used by JS util) */
.ripple {
  position: relative; overflow: hidden;
}
.ripple::after {
  content: ""; position: absolute; border-radius: 50%; pointer-events: none;
  transform: scale(0); opacity: .4; background: var(--brand);
  animation: ripple .6s var(--ease);
}
@keyframes ripple {
  to { transform: scale(16); opacity: 0; }
}
/* Builder tweaks (optional) */
.card .card { background:#0e1526; }
.card .card .card { background:#0c1220; }

/* ====== STYLES ====== */
:root{
  --bg:#0f172a; --panel:#111827; --text:#e5e7eb; --mut:#94a3b8; --brand:#38bdf8; --chip:#1f2937; --accent:#22d3ee; --ok:#10b981;
  --btn:#0b1220; --btnH:#0f1b33; --am:#38bdf8; --pm:#22d3ee;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto}
.wrap{display:flex;height:100%}
.aside{width:220px;padding:16px;background:#0b1220;border-right:1px solid #0b1b33}
.btn{appearance:none;border:1px solid #1e293b;border-radius:12px;padding:10px 14px;background:var(--btn);color:var(--text);cursor:pointer}
.btn:hover{background:var(--btnH)}
.btn.small{padding:6px 10px;font-size:12px;border-radius:10px}
.tab{display:block;margin:8px 0;text-align:left}
.active{outline:2px solid var(--brand)}
.content{flex:1;padding:20px;overflow:auto}
h1,h2{margin:0 0 10px}
.card{background:var(--panel);border:1px solid #1f2937;border-radius:14px;padding:14px;margin-bottom:14px}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.stack{display:flex;flex-direction:column;gap:8px}
.input{background:#0b1220;border:1px solid #1e293b;color:var(--text);padding:10px;border-radius:10px;min-width:90px}
.smallmut,.note{color:var(--mut);font-size:12px}
.tag{font-size:11px;color:#0ea5e9;border:1px solid #1e293b;background:#0b1220;padding:2px 6px;border-radius:999px}
.setlog{display:flex;gap:10px;align-items:center;margin-top:8px;flex-wrap:wrap}
.chips{display:flex;flex-wrap:wrap;gap:6px;margin-top:8px}
.chip{background:var(--chip);border:1px solid #263245;border-radius:10px;padding:6px 8px}
.link{color:var(--accent);cursor:pointer}
.link.mut{color:var(--mut)}
.toast{position:fixed;right:16px;bottom:16px;background:#111827;border:1px solid #223047;border-radius:10px;padding:10px 14px;display:none;max-width:60ch}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:10px}
.divider{height:1px;background:#1e293b;margin:8px 0}
.canvasBox{height:200px;border:1px solid #1f2937;border-radius:10px;overflow:hidden;background:#0b1220;position:relative}
.legend{position:absolute;right:8px;top:6px;display:flex;gap:10px;font-size:12px;color:#cbd5e1;background:#0b1220cc;border:1px solid #223047;border-radius:8px;padding:4px 8px}
.done{opacity:.5; filter:grayscale(.9); position:relative}
.done::after{content:"DONE"; position:absolute; top:8px; right:8px; font-size:11px; color:#10b981;
  border:1px solid #1e293b; background:#0b1220; padding:2px 6px; border-radius:999px;}
.card h2 + .smallmut { color:#a7f3d0; }

/* Modal styles */
.modalOverlay{position:fixed; inset:0; background:#0009; display:none; align-items:center; justify-content:center; z-index:999;}
.modal{width:min(760px, 92vw); max-height:80vh; overflow:auto;
  background:var(--panel); border:1px solid #1f2937; border-radius:14px; padding:16px;
  box-shadow:0 10px 30px #0008;}
.modal .row{align-items:center; justify-content:space-between}
.modal h3{margin:0 0 6px}
.modal .closeBtn{appearance:none;border:1px solid #1e293b;border-radius:10px;padding:6px 10px;background:#0b1220;color:var(--text);cursor:pointer}
.modal .closeBtn:hover{background:#0f1b33}
.modal .item{display:flex;justify-content:space-between;gap:8px;border-bottom:1px dashed #263245;padding:6px 0}
.modal .mut{color:var(--mut);font-size:12px}

.gate{
  position:fixed; inset:0; display:flex; flex-direction:column; gap:10px;
  align-items:center; justify-content:center; background:#0f172a;
  padding:20px;
}
.gate input{
  background:#0b1220; color:#e5e7eb; border:1px solid #1e293b;
  border-radius:10px; padding:12px 14px; min-width:240px;
}
